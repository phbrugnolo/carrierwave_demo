<div id="<%= dom_id document %>">
  <p><strong>Files:</strong></p>
  <% if document.files.present? %>
    <ul>
      <% document.files.each do |f| %>
        <li>
          <%# Display image preview for common image types %>
          <% if f.content_type&.start_with?("image") %>
            <%= link_to(image_tag(f.url, alt: File.basename(f.path), style: "max-height:120px;max-width:120px;display:block;margin-bottom:4px;object-fit:contain;border:1px solid #ddd;padding:2px;border-radius:4px"), f.url, target: "_blank", rel: "noopener") %>
          <% end %>
          <%= link_to File.basename(f.path), f.url, target: "_blank", rel: "noopener" %>
          <% if f.file && f.file.respond_to?(:size) %>
            <small>(<%= number_to_human_size(f.file.size) %>)</small>
          <% end %>
        </li>
      <% end %>
    </ul>
  <% else %>
    <em>No files uploaded.</em>
  <% end %>
</div>
