<div id="<%= dom_id document %>">
  <h6 class="text-uppercase text-muted small mb-2">Files</h6>
  <% if document.files.present? %>
    <ul class="list-unstyled mb-0">
      <% document.files.each do |f| %>
        <li class="mb-2">
          <% if f.content_type&.start_with?("image") %>
            <%= link_to(image_tag(f.url, alt: File.basename(f.path), class: "img-fluid border rounded mb-1", style: "max-height:120px;object-fit:contain;"), f.url, target: "_blank", rel: "noopener") %>
          <% end %>
          <i class="bi bi-paperclip me-1"></i>
          <%= link_to File.basename(f.path), f.url, target: "_blank", rel: "noopener", class: "text-decoration-none" %>
          <% if f.file && f.file.respond_to?(:size) %>
            <small class="text-muted">(<%= number_to_human_size(f.file.size) %>)</small>
          <% end %>
        </li>
      <% end %>
    </ul>
  <% else %>
    <em class="text-muted">No files uploaded.</em>
  <% end %>
</div>
